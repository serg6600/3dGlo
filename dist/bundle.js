(()=>{"use strict";const e=function(e){var t=e.target.value;if("-"===(t=(t=(t=t.replace(/\s+/g," ").trim()).replace(/-+/g,"-")).replace(/\++/g,"+"))[0]&&(t=t.slice(1)),"-"===t[t.length-1]&&(t=t.slice(0,t.length-1)),"form2-name"===e.target.id||"form1-name"===e.target.id||"form3-name"===e.target.id){var n=t.split(" ");t="",n[0]&&n.forEach((function(e){e=e[0].toUpperCase()+e.slice(1).toLowerCase(),t+=e+" "}))}e.target.value=t.trim()};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var n,o,r,a,c,l,u,i,s,d,m,v,f,p,g,y,h,E,S,L,q,b,I,w,A,C;I=document.querySelector("#timer-hours"),w=document.querySelector("#timer-minutes"),A=document.querySelector("#timer-seconds"),C=function(e){return e<10?"0"+e:e},function e(){var t,n,o,r=(t=(new Date("25 june 2021").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60),{timeRemaining:t,hours:Math.floor(t/60/60),minutes:o,seconds:n});if(I.textContent=C(r.hours),w.textContent=C(r.minutes),A.textContent=C(r.seconds),r.timeRemaining>0){if(b)return;b=setInterval(e,1e3)}else clearInterval(setInterval(e,1e3)),I.textContent="00",w.textContent="00",A.textContent="00"}(),S=document.querySelector(".menu"),L=document.querySelector("menu"),q=function(){L.classList.toggle("active-menu")},S.addEventListener("click",q),L.addEventListener("click",(function(e){e.target.closest("a")&&q()})),p=document.querySelector(".popup"),document.querySelector(".popup-close"),g=document.querySelectorAll(".popup-btn"),y=document.querySelector(".popup-content"),h=function(){if(document.documentElement.clientWidth>768){y.style.top="-80%",p.style.display="block";for(var e=function(e){var t=e;setTimeout((function(){y.style.top="".concat(-80+t,"%")}),3*t)},t=1;t<=90;t++)e(t)}else p.style.display="block"},E=function(){if(document.documentElement.clientWidth>768){for(var e=function(e){var t=e;setTimeout((function(){y.style.top="".concat(10-t*t/360,"%")}),2*t)},t=1;t<=180;t++)e(t);setTimeout((function(){p.style.display="none",y.style.top="10%"}),540)}else p.style.display="none"},g.forEach((function(e){e.addEventListener("click",h)})),p.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?E():(t=t.closest(".popup-content"))||E()})),m=document.querySelector(".service-header"),v=m.querySelectorAll(".service-header-tab"),f=document.querySelectorAll(".service-tab"),m.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&v.forEach((function(e,n){e===t&&function(e){for(var t=0;t<f.length;t++)e===t?(v[t].classList.add("active"),f[t].classList.remove("d-none")):(v[t].classList.remove("active"),f[t].classList.add("d-none"))}(n)}))})),function(){for(var e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-content")),n=document.querySelector(".portfolio-dots"),o=[],r=0;r<e.length;r++){var a=document.createElement("li");a.classList.add("dot"),n.append(a),o[r]=a}var c,l=0;o[0].classList.add("dot-active");var u=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){u(e,l,"portfolio-item-active"),u(o,l,"dot-active"),++l>=e.length&&(l=0),i(e,l,"portfolio-item-active"),i(o,l,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;c=setInterval(s,e)};t.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches("#arrow-right, #arrow-left, .dot")&&(u(e,l,"portfolio-item-active"),u(o,l,"dot-active"),n.matches("#arrow-right")?l++:n.matches("#arrow-left")?l--:n.matches(".dot")&&o.forEach((function(e,t){e===n&&(l=t)})),l>=e.length&&(l=0),l<0&&(l=e.length-1),i(e,l,"portfolio-item-active"),i(o,l,"dot-active"))})),t.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(c)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d()})),d(1500)}(),(d=document.querySelectorAll(".command__photo")).forEach((function(e){e.addEventListener("mouseenter",(function(t){var n=e.getAttribute("src");t.target.src=t.target.dataset.img,t.target.dataset.img=n}))})),d.forEach((function(e){e.addEventListener("mouseleave",(function(t){var n=e.getAttribute("src");t.target.src=t.target.dataset.img,t.target.dataset.img=n}))})),document.querySelectorAll(".calc-item").forEach((function(e){"SELECT"!==e.tagName&&e.addEventListener("input",(function(){e.value=e.value.replace(/\D/g,"")}))})),c=document.getElementById("form1-name"),l=document.getElementById("form2-name"),u=document.getElementById("form3-name"),i=document.getElementById("form2-message"),(s=function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-яё|\s|-]/gi,"")}))})(c),s(l),s(u),c.addEventListener("blur",e),l.addEventListener("blur",e),u.addEventListener("blur",e),i.addEventListener("input",(function(){i.value=i.value.replace(/[^а-яё|0-9|\s|,|.|!|?]/gi,"")})),document.querySelectorAll(".form-email").forEach((function(e){e.addEventListener("input",(function(){e.value.trim(),e.value=e.value.replace(/[^a-z|@|_|\.|!|~|*|'|-]/gi,""),e.value=e.value.replace(/\.+/g,"."),e.value=e.value.replace(/\@+/g,"@");for(var t=0;t<e.value.length;t++)if("@"===e.value[t]){for(var n=e.value.split("@"),o=0;o<n[1].length;o++)if("."===n[1][o]){var r=n[1].split(".");r[2]&&(r[1]=r[1]+r[2]),n[1]=r[0]+"."+r[1].replace(/\./g,"")}e.value=n[0]+"@"+n[1].replace(/@/g,"")}"."===e.value[0]&&(e.value=e.value.slice(1))}))})),n=document.getElementById("form1-phone"),o=document.getElementById("form2-phone"),r=document.getElementById("form3-phone"),(a=function(t){t.addEventListener("input",(function(){t.value=t.value.replace(/[^0-9|+]/g,""),t.value&&(t.value=t.value[0]+t.value.slice(1).replace(/\+/g,""),"+"===t.value[0]&&t.value.length>12&&(alert("Необходимо ввести корректную длину номера"),t.value=t.value.slice(0,t.value.length-1)),"+"!==t.value[0]&&t.value.length>11&&(alert("Необходимо ввести корректную длину номера"),t.value=t.value.slice(0,t.value.length-1)))})),t.addEventListener("blur",e)})(n),a(o),a(r),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),l=function(){var t=0,l=1,u=1,i=n.options[n.selectedIndex].value,s=+o.value;a.value>1&&(l+=(a.value-1)/10),r.value&&r.value<5?u*=2:r.value&&r.value<10&&(u*=1.5),i&&s&&(t=e*i*s*l*u),c.textContent=Math.floor(t)};t.addEventListener("change",(function(e){var t=e.target;(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-day")||t.matches(".calc-count"))&&l()}))}(100),function(){var e=document.getElementById("form1"),n=document.getElementById("form2"),o=document.getElementById("form3"),r=document.createElement("div");r.style.cssText="\n    font-size: 2rem;\n    color: white;";var a=function(e,n){e.preventDefault();var o=n.querySelector(".form-phone").value,a=n.querySelector(".form-email").value,c=n.querySelector(".form-name").value;if(o&&c&&a)if("+"===o[0]&&o.length<8)alert("Необходимо ввести корректную длину номера");else if("+"!==o[0]&&o.length<7)alert("Необходимо ввести корректную длину номера");else if(c.length<2)alert("Необходимо ввести корректную длину имени");else{var l,u={},i=function(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,u=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){u=!0,c=e},f:function(){try{l||null==o.return||o.return()}finally{if(u)throw c}}}}(new FormData(n).entries());try{for(i.s();!(l=i.n()).done;){var s=l.value;if(u[s[0]]=s[1],""===s[1])return void alert("Необходимо заполнить все поля")}}catch(e){i.e(e)}finally{i.f()}n.appendChild(r),r.textContent="Загрузка...",n.querySelectorAll("input").forEach((function(e){e.value=""})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(u).then((function(e){if(200!==e.status)throw new Error("network status is not 200");r.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((function(){r.remove()}),3e3),setTimeout((function(){document.querySelector(".popup").style.display="none",document.querySelector(".popup-content").style.top="-80%"}),5e3)})).catch((function(e){r.textContent="Что-то пошло не так...",setTimeout((function(){r.remove()}),3e3)}))}else alert("Необходимо заполнить все поля")};e.addEventListener("submit",(function(t){a(t,e)})),n.addEventListener("submit",(function(e){a(e,n)})),o.addEventListener("submit",(function(e){a(e,o)}))}()})();